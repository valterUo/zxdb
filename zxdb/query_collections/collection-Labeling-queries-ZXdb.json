{
  "version": 1,
  "type": "collection",
  "title": "Labeling queries - ZXdb",
  "items": [
    {
      "title": "Hadamard cancellation labeling query",
      "description": "",
      "query": {
        "code": {
          "value": "MATCH path = (start)-[:Wire*2..6]-(end)\r\nWHERE \r\n  // Even length path\r\n  size(relationships(path)) % 2 = 0\r\n  // All edges are unmarked Hadamard edges\r\n  AND ALL(edge IN relationships(path) WHERE edge.t = 2 AND edge.pattern_id IS NULL)\r\n  // All intermediate nodes are unmarked identity Z-spiders\r\n  AND ALL(node IN nodes(path)[1..-1] \r\n          WHERE node.t = 1 \r\n          AND node.phase % 2 = 0 \r\n          AND degree(node) = 2 \r\n          AND node.pattern_id IS NULL)\r\n  // Only process unmarked start/end nodes\r\n  AND start.pattern_id IS NULL \r\n  AND end.pattern_id IS NULL\r\n\r\n// Order by path length (longest first) and node IDs for consistency\r\nWITH path, nodes(path) as path_nodes, relationships(path) as path_edges\r\nORDER BY length(path) DESC, id(nodes(path)[0]), id(nodes(path)[-1])\r\nLIMIT 1\r\n\r\n// Mark this pattern with unique ID\r\nWITH path_nodes, path_edges, randomUUID() as pattern_id\r\n\r\n// Mark all edges in the path\r\nUNWIND path_edges AS edge\r\nSET edge.pattern_id = pattern_id\r\n\r\n// Mark all intermediate nodes in the path\r\nWITH path_nodes[1..-1] as intermediate_nodes, pattern_id, path_edges\r\nUNWIND intermediate_nodes AS node\r\nSET node.pattern_id = pattern_id\r\n\r\nRETURN DISTINCT pattern_id, length(path_edges) as path_length"
        },
        "params": {}
      },
      "style": {
        "code": {
          "value": "// A palette of colors used to color distinct node labels\nDefine(COLOR_PALETTE, AsArray(\n  #DD2222, #FB6E00, #FFC500, #720096,\n  #5E4FA2, #3288BD, #66C2A5, #ABDDA4,\n  #E6F598, #FEE08B, #D53E4F, #9E0142\n))\nDefine(COLOR_PALETTE_ITER, AsIterator(COLOR_PALETTE))\n\n// If there are no palette colors to use, use random colors instead\nDefine(RandomColor, Function(RGB(RandomInt(255), RandomInt(255), RandomInt(255))))\nDefine(GetNextColor, Function(\n  Coalesce(Next(COLOR_PALETTE_ITER), RandomColor())\n))\n\n// Cache map to keep a selected color for each node label\nDefine(ColorByLabel, AsMap())\nDefine(GetColorByLabel, Function(labels, Coalesce(\n  Get(ColorByLabel, labels),\n  Set(ColorByLabel, labels, GetNextColor())\n)))\nDefine(JoinLabels, Function(labels, Join(Sort(labels), \":\")))\n\n// Baseline node style that will be applied to every single node\n@NodeStyle {\n  Define(COLOR, GetColorByLabel(JoinLabels(Labels(node))))\n\n  size: 6\n  color: COLOR\n  color-hover: Lighter(COLOR)\n  color-selected: Darker(COLOR)\n  border-width: 0.6\n  border-color: #1D1D1D\n  font-size: 3\n  font-color: #1D1D1D\n}\n\n// Overwrite node text with the node label if defined\n@NodeStyle Greater(Size(Labels(node)), 0) {\n  label: Format(\":{}\", Join(Labels(node), \" :\"))\n}\n\n// Overwrite node text with the property \"name\" if defined\n@NodeStyle HasProperty(node, \"name\") {\n  label: AsText(Property(node, \"name\"))\n}\n\n// Feel free to uncomment the lines below to set up a custom style for the specific node label\n// @NodeStyle HasLabel(node, \"MyCustomLabel\") {\n//   color: black\n// }\n\n// Feel free to uncomment the lines below to set up a custom style for the specific node property\n// @NodeStyle HasProperty(node, \"my_property_name\") {\n//   color: black\n//   label: AsText(Property(node, \"my_property_name\"))\n// }\n\nDefine(LATITUDE_FIELD, \"lat\")\nDefine(LONGITUDE_FIELD, \"lng\")\n\n// In the case of numeric latitude and longitude properties, set them up for a switch to a map view\n@NodeStyle And(IsNumber(Property(node, LATITUDE_FIELD)), IsNumber(Property(node, LONGITUDE_FIELD))) {\n  latitude: Property(node, LATITUDE_FIELD)\n  longitude: Property(node, LONGITUDE_FIELD)\n}\n\n// Baseline edge style that will be applied to every single edge\n@EdgeStyle {\n  color: #999999\n  color-hover: #1D1D1D\n  color-selected: #1D1D1D\n  width: 0.3\n  width-hover: 0.9\n  width-selected: 0.9\n  font-size: 3\n  font-color: #1D1D1D\n}\n\n// Show edge text only if there is a small number of edges in the view\n@EdgeStyle Less(EdgeCount(graph), 30) {\n  label: Type(edge)\n}\n\n// In case of a map view, set the default tile layer\n@ViewStyle.Map {\n  tile-layer: \"light\"\n}\n\n// Canvas background color\n@ViewStyle {\n  background-color: #FFFFFF00\n}\n"
        },
        "title": "System Style"
      }
    },
    {
      "title": "Spider labeling query green",
      "description": "",
      "query": {
        "code": {
          "value": "MATCH path = (start)-[:Wire*0..4]-(end)\r\nWHERE\r\n  // All edges are unmarked simple edges\r\n  ALL(edge IN relationships(path) WHERE edge.t = 1 AND edge.pattern_id IS NULL)\r\n  // All intermediate nodes are unmarked Z-spiders\r\n  AND ALL(node IN nodes(path)\r\n          WHERE node.t = 1 \r\n          AND node.pattern_id IS NULL)\r\n  AND id(start) < id(end)\r\n\r\n// Order by path length (longest first) and node IDs for consistency\r\nWITH path, nodes(path) as path_nodes, relationships(path) as path_edges, start, end\r\nORDER BY length(path) DESC, id(nodes(path)[0]), id(nodes(path)[-1])\r\nLIMIT 1\r\n\r\n// Mark this pattern with unique ID\r\nWITH path_nodes, path_edges, randomUUID() as pattern_id, start, end\r\nSET start.start_node = True, end.end_node = True\r\n\r\nWITH path_nodes, path_edges, pattern_id\r\n// Mark all edges in the path\r\nUNWIND path_edges AS edge\r\nSET edge.pattern_id = pattern_id\r\n\r\n// Mark all intermediate nodes in the path\r\nWITH path_nodes AS intermediate_nodes, pattern_id, path_edges\r\nFOREACH (node IN intermediate_nodes | SET node.pattern_id = pattern_id)\r\n\r\nRETURN DISTINCT pattern_id, length(path_edges) as path_length"
        },
        "params": {}
      },
      "style": {
        "code": {
          "value": "// A palette of colors used to color distinct node labels\nDefine(COLOR_PALETTE, AsArray(\n  #DD2222, #FB6E00, #FFC500, #720096,\n  #5E4FA2, #3288BD, #66C2A5, #ABDDA4,\n  #E6F598, #FEE08B, #D53E4F, #9E0142\n))\nDefine(COLOR_PALETTE_ITER, AsIterator(COLOR_PALETTE))\n\n// If there are no palette colors to use, use random colors instead\nDefine(RandomColor, Function(RGB(RandomInt(255), RandomInt(255), RandomInt(255))))\nDefine(GetNextColor, Function(\n  Coalesce(Next(COLOR_PALETTE_ITER), RandomColor())\n))\n\n// Cache map to keep a selected color for each node label\nDefine(ColorByLabel, AsMap())\nDefine(GetColorByLabel, Function(labels, Coalesce(\n  Get(ColorByLabel, labels),\n  Set(ColorByLabel, labels, GetNextColor())\n)))\nDefine(JoinLabels, Function(labels, Join(Sort(labels), \":\")))\n\n// Baseline node style that will be applied to every single node\n@NodeStyle {\n  Define(COLOR, GetColorByLabel(JoinLabels(Labels(node))))\n\n  size: 6\n  color: COLOR\n  color-hover: Lighter(COLOR)\n  color-selected: Darker(COLOR)\n  border-width: 0.6\n  border-color: #1D1D1D\n  font-size: 3\n  font-color: #1D1D1D\n}\n\n// Overwrite node text with the node label if defined\n@NodeStyle Greater(Size(Labels(node)), 0) {\n  label: Format(\":{}\", Join(Labels(node), \" :\"))\n}\n\n// Overwrite node text with the property \"name\" if defined\n@NodeStyle HasProperty(node, \"name\") {\n  label: AsText(Property(node, \"name\"))\n}\n\n// Feel free to uncomment the lines below to set up a custom style for the specific node label\n// @NodeStyle HasLabel(node, \"MyCustomLabel\") {\n//   color: black\n// }\n\n// Feel free to uncomment the lines below to set up a custom style for the specific node property\n// @NodeStyle HasProperty(node, \"my_property_name\") {\n//   color: black\n//   label: AsText(Property(node, \"my_property_name\"))\n// }\n\nDefine(LATITUDE_FIELD, \"lat\")\nDefine(LONGITUDE_FIELD, \"lng\")\n\n// In the case of numeric latitude and longitude properties, set them up for a switch to a map view\n@NodeStyle And(IsNumber(Property(node, LATITUDE_FIELD)), IsNumber(Property(node, LONGITUDE_FIELD))) {\n  latitude: Property(node, LATITUDE_FIELD)\n  longitude: Property(node, LONGITUDE_FIELD)\n}\n\n// Baseline edge style that will be applied to every single edge\n@EdgeStyle {\n  color: #999999\n  color-hover: #1D1D1D\n  color-selected: #1D1D1D\n  width: 0.3\n  width-hover: 0.9\n  width-selected: 0.9\n  font-size: 3\n  font-color: #1D1D1D\n}\n\n// Show edge text only if there is a small number of edges in the view\n@EdgeStyle Less(EdgeCount(graph), 30) {\n  label: Type(edge)\n}\n\n// In case of a map view, set the default tile layer\n@ViewStyle.Map {\n  tile-layer: \"light\"\n}\n\n// Canvas background color\n@ViewStyle {\n  background-color: #FFFFFF00\n}\n"
        },
        "title": "System Style"
      }
    },
    {
      "title": "Spider labeling query red",
      "description": "",
      "query": {
        "code": {
          "value": "MATCH path = (start)-[:Wire*0..4]-(end)\r\nWHERE\r\n  // All edges are unmarked simple edges\r\n  ALL(edge IN relationships(path) WHERE edge.t = 1 AND edge.pattern_id IS NULL)\r\n  // All intermediate nodes are unmarked Z-spiders\r\n  AND ALL(node IN nodes(path)\r\n          WHERE node.t = 2\r\n          AND node.pattern_id IS NULL)\r\n  AND id(start) < id(end)\r\n\r\n// Order by path length (longest first) and node IDs for consistency\r\nWITH path, nodes(path) as path_nodes, relationships(path) as path_edges, start, end\r\nORDER BY length(path) DESC, id(nodes(path)[0]), id(nodes(path)[-1])\r\nLIMIT 1\r\n\r\n// Mark this pattern with unique ID\r\nWITH path_nodes, path_edges, randomUUID() as pattern_id, start, end\r\nSET start.start_node = True, end.end_node = True\r\n\r\nWITH path_nodes, path_edges, pattern_id\r\n// Mark all edges in the path\r\nUNWIND path_edges AS edge\r\nSET edge.pattern_id = pattern_id\r\n\r\n// Mark all intermediate nodes in the path\r\nWITH path_nodes AS intermediate_nodes, pattern_id, path_edges\r\nFOREACH (node IN intermediate_nodes | SET node.pattern_id = pattern_id)\r\n\r\nRETURN DISTINCT pattern_id, length(path_edges) as path_length"
        },
        "params": {}
      },
      "style": {
        "code": {
          "value": "// A palette of colors used to color distinct node labels\nDefine(COLOR_PALETTE, AsArray(\n  #DD2222, #FB6E00, #FFC500, #720096,\n  #5E4FA2, #3288BD, #66C2A5, #ABDDA4,\n  #E6F598, #FEE08B, #D53E4F, #9E0142\n))\nDefine(COLOR_PALETTE_ITER, AsIterator(COLOR_PALETTE))\n\n// If there are no palette colors to use, use random colors instead\nDefine(RandomColor, Function(RGB(RandomInt(255), RandomInt(255), RandomInt(255))))\nDefine(GetNextColor, Function(\n  Coalesce(Next(COLOR_PALETTE_ITER), RandomColor())\n))\n\n// Cache map to keep a selected color for each node label\nDefine(ColorByLabel, AsMap())\nDefine(GetColorByLabel, Function(labels, Coalesce(\n  Get(ColorByLabel, labels),\n  Set(ColorByLabel, labels, GetNextColor())\n)))\nDefine(JoinLabels, Function(labels, Join(Sort(labels), \":\")))\n\n// Baseline node style that will be applied to every single node\n@NodeStyle {\n  Define(COLOR, GetColorByLabel(JoinLabels(Labels(node))))\n\n  size: 6\n  color: COLOR\n  color-hover: Lighter(COLOR)\n  color-selected: Darker(COLOR)\n  border-width: 0.6\n  border-color: #1D1D1D\n  font-size: 3\n  font-color: #1D1D1D\n}\n\n// Overwrite node text with the node label if defined\n@NodeStyle Greater(Size(Labels(node)), 0) {\n  label: Format(\":{}\", Join(Labels(node), \" :\"))\n}\n\n// Overwrite node text with the property \"name\" if defined\n@NodeStyle HasProperty(node, \"name\") {\n  label: AsText(Property(node, \"name\"))\n}\n\n// Feel free to uncomment the lines below to set up a custom style for the specific node label\n// @NodeStyle HasLabel(node, \"MyCustomLabel\") {\n//   color: black\n// }\n\n// Feel free to uncomment the lines below to set up a custom style for the specific node property\n// @NodeStyle HasProperty(node, \"my_property_name\") {\n//   color: black\n//   label: AsText(Property(node, \"my_property_name\"))\n// }\n\nDefine(LATITUDE_FIELD, \"lat\")\nDefine(LONGITUDE_FIELD, \"lng\")\n\n// In the case of numeric latitude and longitude properties, set them up for a switch to a map view\n@NodeStyle And(IsNumber(Property(node, LATITUDE_FIELD)), IsNumber(Property(node, LONGITUDE_FIELD))) {\n  latitude: Property(node, LATITUDE_FIELD)\n  longitude: Property(node, LONGITUDE_FIELD)\n}\n\n// Baseline edge style that will be applied to every single edge\n@EdgeStyle {\n  color: #999999\n  color-hover: #1D1D1D\n  color-selected: #1D1D1D\n  width: 0.3\n  width-hover: 0.9\n  width-selected: 0.9\n  font-size: 3\n  font-color: #1D1D1D\n}\n\n// Show edge text only if there is a small number of edges in the view\n@EdgeStyle Less(EdgeCount(graph), 30) {\n  label: Type(edge)\n}\n\n// In case of a map view, set the default tile layer\n@ViewStyle.Map {\n  tile-layer: \"light\"\n}\n\n// Canvas background color\n@ViewStyle {\n  background-color: #FFFFFF00\n}\n"
        },
        "title": "System Style"
      }
    }
  ]
}